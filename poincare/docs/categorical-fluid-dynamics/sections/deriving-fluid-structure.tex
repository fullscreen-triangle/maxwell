%==============================================================================
% SECTION: DERIVING FLUID STRUCTURE FROM FIRST PRINCIPLES
%==============================================================================

\section{Deriving Fluid Structure from First Principles}
\label{sec:fluid_structure}

We now derive the structure of fluids from first principles using the partition-oscillation-category equivalence. The key insight is that a three-dimensional fluid can be understood as a two-dimensional cross-section undergoing S-transformation along the flow direction.

\subsection{The Cross-Section Principle}
\label{subsec:cross_section}

\begin{axiom}[Cross-Section Representability]
\label{axiom:cross_section}
Any three-dimensional fluid volume with a distinguished flow direction can be represented as a two-dimensional cross-section plus an S-transformation sequence along the flow axis.
\end{axiom}

\begin{definition}[Cross-Section]
\label{def:cross_section}
For a fluid occupying volume $V$ with flow in direction $\hat{x}$, the cross-section at position $x$ is:
\begin{equation}
\Sigma_x = \{(y, z) : (x, y, z) \in V\}
\label{eq:cross_section_def}
\end{equation}
The cross-section is a two-dimensional surface perpendicular to the flow direction.
\end{definition}

\begin{definition}[Cross-Section S-State]
\label{def:cross_section_state}
The S-state of cross-section $\Sigma_x$ is the area-averaged S-coordinate:
\begin{equation}
\Svec_{\Sigma}(x) = \frac{1}{|\Sigma_x|} \int_{\Sigma_x} \Svec(x, y, z) \, dy\, dz
\label{eq:cross_section_state}
\end{equation}
where $|\Sigma_x|$ is the cross-sectional area.
\end{definition}

\begin{theorem}[Dimensional Reduction]
\label{thm:dimensional_reduction}
A three-dimensional fluid volume reduces to:
\begin{equation}
\text{3D Fluid} = \text{2D Cross-Section} \times \text{1D S-Transformation}
\label{eq:dimensional_reduction_principle}
\end{equation}
Explicitly, the S-state at any position $(x, y, z)$ is determined by:
\begin{equation}
\Svec(x, y, z) = \Toperator_{0 \to x}[\Svec_{\Sigma}(0)](y, z)
\label{eq:dimensional_reduction}
\end{equation}
where $\Toperator_{0 \to x}$ is the S-transformation operator from the inlet ($x = 0$) to position $x$.
\end{theorem}

\begin{proof}
Consider a molecule at position $(x, y, z)$ in the fluid. By the S-sliding window principle, this molecule's categorical state is determined by:
\begin{enumerate}
\item Its initial state when entering the system (at $x = 0$)
\item The sequence of categorical completions it underwent while travelling from $x = 0$ to $x$
\end{enumerate}

The S-transformation operator $\Toperator_{0 \to x}$ encodes this sequence:
\begin{equation}
\Toperator_{0 \to x} = \Toperator_{(x-dx) \to x} \circ \Toperator_{(x-2dx) \to (x-dx)} \circ \cdots \circ \Toperator_{0 \to dx}
\label{eq:operator_composition}
\end{equation}

Each infinitesimal operator $\Toperator_{x' \to x'+dx}$ depends only on local conditions at $x'$. Hence the full S-state is determined by the initial cross-section and the transformation sequence. \qed
\end{proof}

\begin{corollary}[Computational Complexity Reduction]
\label{cor:computational_reduction}
The dimensional reduction reduces complexity from $\mathcal{O}(N_x \cdot N_y \cdot N_z)$ to $\mathcal{O}(N_x \cdot 3)$.
\end{corollary}

\begin{proof}
Without reduction: track $N_x \times N_y \times N_z$ grid points, each with molecular degrees of freedom.

With reduction: track $N_x$ cross-sections, each characterised by 3 S-coordinates $(S_k, S_t, S_e)$. The internal $(y, z)$ structure is reconstructed from the transformation, not independently tracked. \qed
\end{proof}

\begin{figure}[htbp]
\centering
\includegraphics[width=\textwidth]{figures/panel_fluid_structure.pdf}
\caption{\textbf{Deriving Fluid Structure from Categorical Principles.}
(A) The countability revolution: classical fluid mechanics treats fluids as continua with infinite degrees of freedom. Our framework reduces this to finite S-coordinates by exploiting categorical equivalence---microscopically different states that are macroscopically indistinguishable are identified. (B) Cross-section principle: a 3D fluid volume is represented by 2D cross-sections plus 1D S-transformation. Like a CT scan reconstructing 3D structure from 2D slices, we reconstruct fluid dynamics from cross-sectional S-profiles. (C) Phase-lock networks across phases: gas (sparse network, weak coupling), liquid (intermediate density, moderate coupling), solid (dense network, strong coupling). The network density $\rho_G$ determines fluid properties---viscosity scales with network connectivity. (D) Viscosity as memory: dense networks require more phase-lock reconfigurations per unit strain, accumulating more memory. This is why liquids are more viscous than gases (denser networks) but less viscous at higher temperatures (thermal disruption of phase-locks).}
\label{fig:fluid_structure}
\end{figure}

\subsection{Molecules as Pendulums: The Vibrational Mode Representation}
\label{subsec:molecules_pendulums}

Each molecule in the fluid can be represented as a collection of oscillatory modesâ€”effectively, a set of coupled pendulums.

\begin{definition}[Molecular Mode Decomposition]
\label{def:mode_decomposition}
A molecule with $N$ atoms has $3N$ degrees of freedom, decomposed as:
\begin{itemize}
\item 3 translational modes (centre-of-mass motion)
\item 3 rotational modes (for non-linear molecules; 2 for linear)
\item $3N - 6$ vibrational modes (internal oscillations)
\end{itemize}
Each mode $i$ oscillates with a characteristic frequency $\omega_i$.
\end{definition}

\begin{theorem}[Mode-Pendulum Equivalence]
\label{thm:mode_pendulum}
Each molecular mode is equivalent to a simple pendulum:
\begin{equation}
\text{Mode } i \longleftrightarrow \text{Pendulum with period } T_i = \frac{2\pi}{\omega_i}
\label{eq:mode_pendulum}
\end{equation}
The mode's categorical states correspond to positions along the pendulum's oscillation arc.
\end{theorem}

\begin{proof}
By the triple equivalence (Theorem~\ref{prereq:thm:triple_equivalence}), oscillatory dynamics, categorical states, and partition geometry are equivalent descriptions. A molecular mode with frequency $\omega_i$ traces a periodic trajectory. Dividing this trajectory into $n$ distinguishable positions yields $n$ categorical states, exactly as for a pendulum. \qed
\end{proof}

\begin{definition}[Molecular S-Coordinate]
\label{def:molecular_s_coordinate}
The S-coordinate of a molecule is the collective state of all its modes:
\begin{equation}
\Svec_{\text{mol}} = \bigoplus_{i=1}^{3N} \Svec_i
\label{eq:molecular_s_coordinate}
\end{equation}
where $\Svec_i$ is the S-coordinate of mode $i$ and $\bigoplus$ denotes the direct sum over modes.
\end{definition}

\subsection{Phase-Lock Networks in Fluids}
\label{subsec:phase_lock_networks}

Molecules in a fluid do not oscillate independently. Their modes couple through intermolecular forces, creating phase-lock networks.

\begin{definition}[Intermolecular Phase-Lock]
\label{def:intermolecular_lock}
Molecules $i$ and $j$ are phase-locked if their oscillatory modes maintain a fixed phase relationship:
\begin{equation}
\phi_i(t) - \phi_j(t) = \Delta\phi_{ij} = \text{constant}
\label{eq:intermolecular_lock}
\end{equation}
over timescales longer than the oscillation period.
\end{definition}

\begin{definition}[Phase-Lock Graph]
\label{def:phase_lock_graph}
The phase-lock graph $G = (V, E)$ has:
\begin{itemize}
\item Vertices $V$: molecular modes
\item Edges $E$: phase-lock relationships between modes
\end{itemize}
An edge $(i, j) \in E$ exists if modes $i$ and $j$ satisfy Equation~\ref{eq:intermolecular_lock}.
\end{definition}

\begin{definition}[Network Density]
\label{def:network_density}
The phase-lock network density is:
\begin{equation}
\rho_{\text{net}} = \frac{|E|}{|V|(|V|-1)/2}
\label{eq:network_density}
\end{equation}
where $|E|$ is the edge count and $|V|(|V|-1)/2$ is the maximum possible edges.
\end{definition}

\begin{theorem}[Phase Classification by Network Density]
\label{thm:phase_classification}
The phase of matter is determined by phase-lock network density:
\begin{align}
\text{Gas:} \quad &\rho_{\text{net}} \ll 1 \quad \text{(sparse network, weak coupling)} \\
\text{Liquid:} \quad &\rho_{\text{net}} \sim 1 \quad \text{(dense network, strong coupling)} \\
\text{Solid:} \quad &\rho_{\text{net}} = 1 \quad \text{(complete network, rigid coupling)}
\end{align}
\end{theorem}

\begin{proof}
In gases, molecules are well-separated. Interaction strength scales as $r^{-6}$ (van der Waals). At typical gas separations ($\sim 10$ nm), thermal energy $\kB T$ dominates interaction energy. Phase-locks form only during brief collisions, then dissolve. Hence $|E| \ll |V|^2$.

In liquids, molecules are densely packed ($\sim 0.3$ nm separation). Interaction energy is comparable to thermal energy. Phase-locks persist between neighbours, constantly forming and breaking. Hence $|E| \sim |V|^2/2$.

In solids, molecules are locked in lattice positions. Phase relationships are permanent. Every neighbour pair is phase-locked: $|E| = |V|^2/2$ for the interaction range. \qed
\end{proof}

\subsection{The Memory Principle: Phase-Lock History}
\label{subsec:memory_principle}

A crucial insight: phase-lock networks carry \textit{history}. This history is the origin of viscosity.

\begin{definition}[Phase-Lock Memory]
\label{def:phase_lock_memory}
The memory $\mathcal{M}$ of a phase-lock network is the set of past configurations that influence present behaviour:
\begin{equation}
\mathcal{M}(t) = \{G(t') : t - \tau_{\text{mem}} < t' < t\}
\label{eq:phase_lock_memory}
\end{equation}
where $\tau_{\text{mem}}$ is the memory timescale.
\end{definition}

\begin{theorem}[Memory Timescale by Phase]
\label{thm:memory_timescale}
The memory timescale depends on matter phase:
\begin{align}
\text{Gas:} \quad &\tau_{\text{mem}} \approx \tau_{\text{coll}} \quad \text{(collision time)} \\
\text{Liquid:} \quad &\tau_{\text{mem}} \approx \tau_{\text{relax}} \gg \tau_{\text{coll}} \quad \text{(structural relaxation time)} \\
\text{Solid:} \quad &\tau_{\text{mem}} \to \infty \quad \text{(permanent memory)}
\end{align}
\end{theorem}

\begin{proof}
In gases, phase-lock relationships exist only during collisions. After a collision, the molecules separate and ``forget'' their relationship. Memory persists only for $\tau_{\text{coll}}$.

In liquids, phase-lock relationships persist across many molecular oscillation periods. A molecule remembers its neighbours' states for the structural relaxation time $\tau_{\text{relax}}$, during which the local cage of neighbours rearranges.

In solids, phase-lock relationships are permanent. The lattice structure encodes an infinite history of formation. \qed
\end{proof}

\begin{theorem}[Viscosity from Memory]
\label{thm:viscosity_memory}
Viscosity is proportional to phase-lock memory:
\begin{equation}
\eta \propto \rho \cdot \tau_{\text{mem}} \cdot \kB T
\label{eq:viscosity_memory}
\end{equation}
\end{theorem}

\begin{proof}
When a fluid layer moves, it must drag adjacent phase-locked layers. The ``dragging force'' depends on how long the phase-lock relationship persists---i.e., the memory timescale.

Short memory (gas): layers decouple quickly, minimal resistance, low $\eta$.

Long memory (liquid): layers remain coupled, significant resistance, finite $\eta$.

Infinite memory (solid): layers cannot decouple, infinite resistance, no flow. \qed
\end{proof}

\subsection{Cross-Section Dynamics: The S-Sliding Window}
\label{subsec:cross_section_dynamics}

We now describe how cross-sections evolve along the flow direction using the S-sliding window.

\begin{definition}[S-Sliding Window for Fluids]
\label{def:s_sliding_window_fluid}
The S-sliding window $W_x$ at position $x$ is the set of molecules whose S-coordinates influence the cross-section S-state:
\begin{equation}
W_x = \{\text{molecules } i : |x_i - x| < \ell_{\text{corr}}\}
\label{eq:s_sliding_window_fluid}
\end{equation}
where $\ell_{\text{corr}}$ is the correlation length.
\end{definition}

\begin{theorem}[Cross-Section Evolution]
\label{thm:cross_section_evolution}
The cross-section S-state evolves according to:
\begin{equation}
\frac{d\Svec_{\Sigma}}{dx} = -\frac{1}{v_x} \nabla_S \Phi + \mathcal{D} \nabla_S^2 \Svec_{\Sigma}
\label{eq:cross_section_evolution}
\end{equation}
where $v_x$ is the flow velocity, $\Phi$ is the S-potential, and $\mathcal{D}$ is the S-diffusivity.
\end{theorem}

\begin{proof}
As the S-window slides from $x$ to $x + dx$:
\begin{enumerate}
\item Molecules exit the window at the trailing edge
\item Molecules enter the window at the leading edge
\item Molecules within the window undergo categorical transitions
\end{enumerate}

The net effect is advection along $-\nabla_S \Phi$ (categorical completion drives flow) plus diffusion $\mathcal{D} \nabla_S^2 \Svec$ (random transitions spread S-states). \qed
\end{proof}

\begin{corollary}[Steady Flow Condition]
\label{cor:steady_flow}
In steady flow, $d\Svec_{\Sigma}/dx$ is constant along streamlines:
\begin{equation}
\Svec_{\Sigma}(x) = \Svec_{\Sigma}(0) + x \cdot \frac{d\Svec_{\Sigma}}{dx}\bigg|_{\text{steady}}
\label{eq:steady_flow}
\end{equation}
\end{corollary}

\subsection{From Cross-Section to Full Fluid Structure}
\label{subsec:full_structure}

We now show how the cross-section representation generates the complete three-dimensional fluid structure.

\begin{theorem}[Fluid Structure Reconstruction]
\label{thm:structure_reconstruction}
Given the inlet cross-section S-state $\Svec_{\Sigma}(0)$ and the S-transformation operator $\Toperator$, the complete fluid structure is:
\begin{equation}
\Svec(x, y, z) = \Toperator_{0 \to x}[\Svec_{\Sigma}(0)] + \delta\Svec(y, z)
\label{eq:structure_reconstruction}
\end{equation}
where $\delta\Svec(y, z)$ encodes cross-sectional variations (e.g., velocity profile).
\end{theorem}

\begin{proof}
The mean S-state at position $x$ is $\Toperator_{0 \to x}[\Svec_{\Sigma}(0)]$ by the dimensional reduction theorem.

Cross-sectional variations arise from:
\begin{itemize}
\item Boundary effects: molecules near walls have different S-coordinates than those in the bulk
\item Velocity profile: molecules at different $(y, z)$ positions move at different speeds
\item Composition variations: in mixtures, species distribution varies across the cross-section
\end{itemize}

These variations $\delta\Svec(y, z)$ add to the mean, giving the full spatial dependence. \qed
\end{proof}

\begin{figure}[htbp]
\centering
\includegraphics[width=\textwidth]{figures/panel_ensemble_sliding_window.png}
\caption{\textbf{The S-Sliding Window: Observing Fluids One State at a Time.}
The S-sliding window is the mechanism by which continuous fluid dynamics emerges from discrete categorical observations. (A) Window definition: at any instant, the observer accesses one categorical state. The window ``slides'' across S-space as time progresses, traversing the fluid's categorical structure. This is analogous to reading text---each moment reveals one letter, but the sequence reconstructs the message. (B) Window adjacency: adjacent windows are connected by S-transformation; distant windows are connected by composition of transformations. The adjacency structure encodes the fluid's topology. (C) Ensemble interpretation: the window ensemble (all positions the window has visited) defines the observed fluid properties. Thermodynamic averages are window-ensemble averages; fluctuations are window-to-window variations. (D) Connection to measurement: every physical measurement is an S-sliding window observation. Mass spectrometry slides through mass-to-charge space; NMR slides through spin space; chromatography slides through retention space. The S-sliding window is the universal measurement formalism.}
\label{fig:ensemble_sliding_window}
\end{figure}

\begin{definition}[Velocity Profile from S-Gradient]
\label{def:velocity_profile}
The velocity profile across a cross-section arises from the S-gradient:
\begin{equation}
v(y, z) = -\frac{1}{\eta} \nabla_S \Phi \cdot \ell_{\text{char}}
\label{eq:velocity_profile}
\end{equation}
where $\eta$ is the viscosity and $\ell_{\text{char}}$ is the characteristic length.
\end{definition}

\begin{theorem}[Parabolic Profile Emergence]
\label{thm:parabolic_profile}
For flow in a circular pipe of radius $R$ with no-slip boundaries, the velocity profile is parabolic:
\begin{equation}
v(r) = v_{\text{max}} \left(1 - \frac{r^2}{R^2}\right)
\label{eq:parabolic_profile}
\end{equation}
where $r = \sqrt{y^2 + z^2}$ is the radial distance from the centre.
\end{theorem}

\begin{proof}
At the wall ($r = R$), molecules are phase-locked to the stationary boundary: $v(R) = 0$ (no-slip condition).

At the centre ($r = 0$), molecules are furthest from boundary phase-locks: maximum freedom, maximum velocity.

The S-gradient is uniform across the cross-section (pressure-driven flow). The balance between driving force ($\nabla_S \Phi$) and viscous resistance ($\eta \nabla^2 v$) yields:
\begin{equation}
\eta \nabla^2 v = -\nabla_S \Phi
\end{equation}

In cylindrical coordinates with azimuthal symmetry:
\begin{equation}
\frac{\eta}{r} \frac{d}{dr}\left(r \frac{dv}{dr}\right) = -\frac{\partial \Phi}{\partial x} = \text{const}
\end{equation}

Integrating twice with boundary conditions $v(R) = 0$ and $v'(0) = 0$ (symmetry) gives the parabolic profile. \qed
\end{proof}

\subsection{Summary: The Complete Derivation Chain}
\label{subsec:derivation_chain}

We have derived fluid structure from first principles through the following chain:

\begin{enumerate}
\item \textbf{Molecules as pendulums}: Each molecular mode is an oscillator (Section~\ref{subsec:molecules_pendulums})

\item \textbf{Phase-lock networks}: Intermolecular forces couple oscillators into networks (Section~\ref{subsec:phase_lock_networks})

\item \textbf{Memory creates viscosity}: Network history manifests as viscous resistance (Section~\ref{subsec:memory_principle})

\item \textbf{Cross-section representation}: 3D fluid = 2D cross-section $\times$ 1D S-transformation (Section~\ref{subsec:cross_section})

\item \textbf{S-sliding window dynamics}: Cross-sections evolve via categorical completion (Section~\ref{subsec:cross_section_dynamics})

\item \textbf{Full structure reconstruction}: Complete spatial dependence from inlet conditions and transformations (Section~\ref{subsec:full_structure})
\end{enumerate}

This derivation requires no phenomenological inputs---viscosity, velocity profiles, and flow structure all emerge from the partition-oscillation-category equivalence applied to molecular ensembles.

